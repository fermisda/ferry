#Tests getGroupMembers/IsUserMemberOfGroup/addUserToGroup/getUserGroups
test_name: test 1 getGroupMembers
stages: 
 - name: testing getGroupMembers 
   request:
      url: https://fermicloud033.fnal.gov:8443/getGroupMembers?groupname=egp
      method: GET
   response:
      status_code: 200
      body:
             ferry_status: success
             ferry_error: [] 
             ferry_output: 
                - {"uid": 10610,"username": "sbhat"}
                - {"uid":  2384,"username":  "kobilarc"}
                - {"uid": 6706,"username": "bross"}
                - {"uid": 11469,"username": "kherner"}
                - {"uid": 44549,"username": "ehrlich"}
                - {"uid": 54624,"username": "egp"}
                - {"uid": 54625,"username": "egpana"}
                - {"uid": 54626,"username": "egppro"}
                - {"uid": 54627,"username": "egpgli"}
                - {"uid": 4395,"username": "boyd"}
                - {"uid": 5049,"username": "lyon"}
---
test_name: test 2 
stages:
 - name: "testing getGroupMamebers for failure: wrong groupname"
   request:
      url: https://fermicloud033.fnal.gov:8443/getGroupMembers?groupname=egpxxx
      method: GET
   response:
      status_code: 200
      body:
             ferry_status: failure
             ferry_error: 
                       -  "groupname not found" 
             ferry_output: null 
---             
test_name: test 3 IsUserMemberOfGroup 
stages:
 - name: "testing IsUserMemberOfGroup for True" 
   request:
      url: https://fermicloud033.fnal.gov:8443/IsUserMemberOfGroup?groupname=egp&username=sbhat 
      method: GET
   response:
      status_code: 200
      body:
             ferry_status: success
             ferry_error: []
             ferry_output: true 

---             
test_name: test 4 IsUserMemberOfGroup
stages:
 - name: "testing IsUserMemberOfGroup for False" 
   request:
      url: https://fermicloud033.fnal.gov:8443/IsUserMemberOfGroup?groupname=egp&username=napier
      method: GET
   response:
      status_code: 200
      body:
             ferry_status: success
             ferry_error: []
             ferry_output: false

---
test_name: test 5 IsUserMemberOfGroup
stages:
 - name: "testing IsUserMemberOfGroup for non-existent group"
   request:
      url: https://fermicloud033.fnal.gov:8443/IsUserMemberOfGroup?groupname=egpxxx&username=napier
      method: GET
   response:
      status_code: 200
      body:
             ferry_status: failure
             ferry_error: 
                - "groupname not found"
             ferry_output: null

---
test_name: test 6 IsUserLeaderOfGroup
stages:
 - name: "testing IsUserLeaderOfGroup to be a leader - FALSE"
   request:
      url: https://fermicloud033.fnal.gov:8443/IsUserLeaderOfGroup?groupname=egp&username=sbhat
      method: GET
   response:
      status_code: 200
      body:
             ferry_status: success
             ferry_error: [] 
             ferry_output: false


---
test_name: test 7 setGroupLeader
stages:
 - name: "testing setGroupLeader"
   request:
      url: https://fermicloud033.fnal.gov:8443/setGroupLeader?groupname=egp&username=sbhat&grouptype=UnixGroup
      method: GET
   response:
      status_code: 200
      body:
             ferry_status: success
             ferry_error: []
             ferry_output: null 

---
test_name: test 8 IsUserLeaderOfGroup
stages:
 - name: "testing IsUserLeaderOfGroup to be a leader - True"
   request:
      url: https://fermicloud033.fnal.gov:8443/IsUserLeaderOfGroup?groupname=egp&username=sbhat
      method: GET
   response:
      status_code: 200
      body:
             ferry_status: success
             ferry_error: []
             ferry_output: true
---
test_name: test 9 removeGroupLeader
stages:
 - name: "testing removeGroupLeader"
   request:
      url: https://fermicloud033.fnal.gov:8443/removeGroupLeader?groupname=egp&username=sbhat&grouptype=UnixGroup
      method: GET
   response:
      status_code: 200
      body:
             ferry_status: success
             ferry_error: []
             ferry_output: null 

---
test_name: test 10 IsUserLeaderOfGroup
stages:
 - name: "testing IsUserLeaderOfGroup to be a leader - True"
   request:
      url: https://fermicloud033.fnal.gov:8443/IsUserLeaderOfGroup?groupname=egp&username=sbhat
      method: GET
   response:
      status_code: 200
      body:
             ferry_status: success
             ferry_error: []
             ferry_output: false 
---
test_name: test 11 getUserGroups

stages:
 - name: "testing getUserGroups"
   request:
      url: https://fermicloud033.fnal.gov:8443/getUserGroups?username=napier
      method: GET
   response:
      status_code: 200
      body:
             ferry_status: success
             ferry_error: []
             ferry_output: 
                - {"gid": 8420,"groupname": "ebd","grouptype": "UnixGroup"}
                - {"gid": 3200,"groupname": "cdf","grouptype": "UnixGroup"} 
                - {"gid": 1720,"groupname": "e791","grouptype": "UnixGroup"}
                - {"gid": 9767,"groupname": "fnalgrid","grouptype": "UnixGroup"}
---
test_name: test 12 getUserGroups

stages:
 - name: "testing addUserToGroup"
   request:
      url: https://fermicloud033.fnal.gov:8443/addUserToGroup?username=napier&groupname=quantuml&grouptype=UnixGroup&leader=true
      method: GET
   response:
      status_code: 200
      body:
             ferry_status: success
             ferry_error: []
             ferry_output: null
---
test_name: test 13 getUserGroups

stages:
 - name: "testing getUserGroups"
   request:
      url: https://fermicloud033.fnal.gov:8443/getUserGroups?username=napier
      method: GET
   response:
      status_code: 200
      body:
             ferry_status: success
             ferry_error: []
             ferry_output:
                - {"gid": 8755, "groupname": "quantuml","grouptype": "UnixGroup"}
                - {"gid": 8420,"groupname": "ebd","grouptype": "UnixGroup"}
                - {"gid": 3200,"groupname": "cdf","grouptype": "UnixGroup"}  
                - {"gid": 1720,"groupname": "e791","grouptype": "UnixGroup"}
                - {"gid": 9767,"groupname": "fnalgrid","grouptype": "UnixGroup"}

---
test_name: test 14 IsUserLeaderOfGroup
stages:
 - name: "testing IsUserLeaderOfGroup to be a leader - True"
   request:
      url: https://fermicloud033.fnal.gov:8443/IsUserLeaderOfGroup?groupname=egp&username=napier
      method: GET
   response:
      status_code: 200
      body:
             ferry_status: success
             ferry_error: []
             ferry_output: false
