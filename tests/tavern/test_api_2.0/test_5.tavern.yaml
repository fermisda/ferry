# Tests set/get UserExternal
test_name: test 1 setUserExternalAffiliationAttribute 
stages: 
 - name: testing setUserExternalAffiliationAttribute
   request:
      url: https://fermicloud033.fnal.gov:8443/setUserExternalAffiliationAttribute?username=tlevshin&attribute=cern_username&value=tanya1
      method: GET
   response:
      status_code: 200
      body:
             ferry_status: "success"
             ferry_error: []
             ferry_output: null
---
test_name: test 2 
stages:
 - name: "testing setUserExternalAffiliationAttribute failure: parameter is missing"
   request:
      url: https://fermicloud033.fnal.gov:8443/setUserExternalAffiliationAttribute?username=tlevshin&value=1
      method: GET
   response:
      status_code: 200
      body:
             ferry_status: "failure"
             ferry_error: 
                - "required parameter attribute not provided"
             ferry_output: null

---
test_name: test 3 
stages:
 - name: "testing setUserExternalAffiliationAttribute failure: multiple issues"
   request:
      url: https://fermicloud033.fnal.gov:8443/setUserExternalAffiliationAttribute?username=tlevshinX&attribute=test&value=1
      method: GET
   response:
      status_code: 200
      body:
             ferry_status: "failure"
             ferry_error:
                - "username not found"
                - "attribute is invalid"
             ferry_output: null
---
test_name: test 4 getUserExternalAffiliationAttributes
stages:
 - name: testing getUserExternalAffiliationAttributes
   request:
      url: https://fermicloud033.fnal.gov:8443/getUserExternalAffiliationAttributes?username=tlevshin
      method: GET
   response:
      status_code: 200
      body:
             ferry_status: "success"
             ferry_error: []
             ferry_output: {"tlevshin":[{"attribute":"cern_username","value":"tanya1"}]}
---
test_name: test 5 setUserExternalAffiliationAttribute
stages:
 - name: testing setUserExternalAffiliationAttribute changing back value
   request:
      url: https://fermicloud033.fnal.gov:8443/setUserExternalAffiliationAttribute?username=tlevshin&attribute=cern_username&value=tanya
      method: GET
   response:
      status_code: 200
      body:
             ferry_status: "success"
             ferry_error: []
             ferry_output: null

